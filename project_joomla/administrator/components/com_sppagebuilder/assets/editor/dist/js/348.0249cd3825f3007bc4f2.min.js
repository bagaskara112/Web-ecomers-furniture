/*! For license information please see 348.0249cd3825f3007bc4f2.min.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_typescript_webpack_backend_editor=self.webpackChunkreact_typescript_webpack_backend_editor||[]).push([[348],{8348:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ee});var n=r(3871),o=r(7870),a=r(7264),i=r(1731),l=r(4353),c=r(8122),s=r(5350),u=r(7579),d=r(3039),p=r(7894),_=r(6184),E=r(3816),f=r(5827),h=r(1709),g=r(2847),y=r(9148),b=r(824),v=r(4185),P=r(917),O=r(1234),I=r(1151),S=r(1921),m=r(7602),T=r(7294),L=r(5944);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=T.forwardRef((function(e,t){var r=e.position,n=e.onClose,o=(0,I.fS)(),i=R(T.useState(!1),2),l=i[0],c=i[1],s=R((0,T.useState)(null),2),u=s[0],d=s[1],p=(0,O.$)(),_=(0,h.d)().showModal,E=(0,T.useMemo)((function(){return o.data?o.data:[]}),[o.data]),f=(0,T.useCallback)((function(e){var t=e.pageType,r=e.collectionId;_({component:y.Z,props:{title:p("COM_SPPAGEBUILDER_EDITOR_CREATE_PAGE_MODAL_TITLE"),pageType:t,collectionId:r}})}),[]),b=(0,T.useCallback)((function(){c(!1),d(null),n()}),[]);return(0,L.tZ)("div",{ref:t,css:[M.wrapper,{top:r.top,left:r.left},";label:PageCreationPopover;"],children:(0,L.BX)("div",{css:M.pageTypeList,children:[(0,L.tZ)("button",{type:"button",css:M.pageTypeItem,onMouseEnter:function(){c(!1)},onClick:function(){b(),f({pageType:"page",collectionId:null})},children:p("COM_SPPAGEBUILDER_EDITOR_ADD_NEW_PAGE_OPTION")}),(0,L.BX)("button",{type:"button",css:M.pageTypeItem,disabled:m.Eu,onMouseEnter:function(){c(!1),d(null)},onClick:function(){b(),m.Eu||f({pageType:"popup",collectionId:null})},children:[(0,L.tZ)("span",{children:p("COM_SPPAGEBUILDER_EDITOR_ADD_NEW_POPUP_PAGE_OPTION")}),m.Eu&&(0,L.tZ)(g.Z,{})]}),(0,L.BX)("div",{css:M.pageTypeItem({disabled:m.Eu||0===E.length}),onMouseEnter:function(){return c(!0)},onClick:function(){m.Eu&&b()},onKeyDown:m.ZT,children:[(0,L.tZ)("span",{children:p("COM_SPPAGEBUILDER_EDITOR_ADD_NEW_DYNAMIC_CONTENT_PAGE_OPTION")}),m.Eu&&(0,L.tZ)(g.Z,{}),!m.Eu&&E.length>0&&(0,L.BX)(L.HY,{children:[(0,L.tZ)(a.Z,{name:"chevronRight",width:12,height:12}),(0,L.tZ)("div",{css:M.dynamicPageList(l),children:E.map((function(e,t){return(0,L.BX)("div",{css:M.dynamicPageItem(e.disabled),onMouseEnter:function(){d(e.id)},children:[e.title,(0,L.tZ)(a.Z,{name:"chevronRight",width:12,height:12}),(0,L.tZ)("div",{css:M.dynamicPageItemPages(u===e.id),children:e.pages.map((function(e,t){return(0,L.tZ)("button",{type:"button",css:M.dynamicPageItemPage,disabled:e.disabled,onClick:function(){b(),f({pageType:e.page_type,collectionId:e.collection_id})},children:e.title},t)}))})]},t)}))})]})]})]})})}));const C=D;var w={name:"1wiigg0-dynamicPageItemPages",styles:"visibility:visible;label:dynamicPageItemPages;"},G={name:"10c0efm-dynamicPageList",styles:"visibility:visible;label:dynamicPageList;"},B={name:"1dca593-pageTypeItem",styles:"&>span{opacity:0.5;}pointer-events:none;cursor:not-allowed;label:pageTypeItem;"},M={wrapper:(0,P.iv)("position:absolute;width:",m.Eu?280:240,"px;background-color:",b.qo.background.white,";border-radius:",b.E0[6],";box-shadow:",b.AF.popover,";;label:wrapper;"),pageTypeList:(0,P.iv)("border-radius:",b.E0[6],";;label:pageTypeList;"),pageTypeItem:function(e){var t=e.disabled,r=void 0!==t&&t;return(0,P.iv)(S.iZ.resetButton,";",v.c.body(),";color:",b.qo.text.default,";width:100%;display:flex;align-items:center;justify-content:space-between;border-radius:0;background-color:",b.qo.background.white,";transition:background-color 0.3s ease-in-out;padding-inline:",b.W0[16],";padding-block:",b.W0[8],";z-index:",b.W5.highest,";position:relative;&:first-of-type{border-top-left-radius:",b.E0[6],";border-top-right-radius:",b.E0[6],";}&:last-of-type{border-bottom-left-radius:",b.E0[6],";border-bottom-right-radius:",b.E0[6],";}&:hover{background-color:",b.qo.background.hover,";color:",b.qo.text.hover,";&:not(:first-of-type):not(:last-of-type){border-radius:0;}}&:disabled{pointer-events:none;cursor:not-allowed;&>span{opacity:0.5;}}",r&&B,";;label:pageTypeItem;")},dynamicPageList:function(e){return(0,P.iv)("position:absolute;width:180px;background-color:",b.qo.background.white,";box-shadow:",b.AF.popover,";left:-",b.W0[8],";top:0;visibility:hidden;border-radius:",b.E0[6],";transform:translateX(-100%);",e&&G,";;label:dynamicPageList;")},dynamicPageItem:function(e){return(0,P.iv)(v.c.body(),";color:",b.qo.text.default,";width:100%;display:flex;align-items:center;justify-content:space-between;border-radius:",b.E0[6],";background-color:",b.qo.background.white,";transition:background-color 0.3s ease-in-out;padding-inline:",b.W0[16],";padding-block:",b.W0[8],";border-radius:0;position:relative;&:first-of-type{border-top-left-radius:",b.E0[6],";border-top-right-radius:",b.E0[6],";}&:last-of-type{border-bottom-left-radius:",b.E0[6],";border-bottom-right-radius:",b.E0[6],";}&:hover{background-color:",b.qo.background.hover,";color:",b.qo.text.hover,";&:not(:first-of-type):not(:last-of-type){border-radius:0;}}",e&&(0,P.iv)("color:",b.qo.text.disabled,";pointer-events:none;cursor:not-allowed;;label:dynamicPageItem;"),";;label:dynamicPageItem;")},dynamicPageItemPages:function(e){return(0,P.iv)("position:absolute;width:100%;background-color:",b.qo.background.white,";box-shadow:",b.AF.popover,";left:-",b.W0[8],";top:0;border-radius:",b.E0[6],";visibility:hidden;transform:translateX(-100%);overflow:hidden;",e&&w,";;label:dynamicPageItemPages;")},dynamicPageItemPage:(0,P.iv)(S.iZ.resetButton,";",v.c.body(),";color:",b.qo.text.default,";width:100%;padding-inline:",b.W0[16],";padding-block:",b.W0[8],";border-radius:0;&:hover{background-color:",b.qo.background.hover,";color:",b.qo.text.hover,";}&:disabled{color:",b.qo.text.disabled,";pointer-events:none;cursor:not-allowed;};label:dynamicPageItemPage;")},U=r(6929),x=r(3106),N=r(9752),Z=r(5587),k=r(36),j=r(802),F=r(4370),W=r(1954),Y=r(2200),H=r(908),K=r(8698),q=r(3425),X=r(6511),$=r(7902),V=r(2028),J=r(8537),Q=r(4693),z=r(7184),ee=r(7679),te=r(5602),re=r(7273),ne=r(6216),oe=r(7536);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(){ie=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),l=new m(o||[]);return n(i,"_invoke",{value:P(e,r,l)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function _(){}function E(){}var f={};c(f,a,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(T([])));g&&g!==t&&r.call(g,a)&&(f=g);var y=E.prototype=p.prototype=Object.create(f);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function o(n,a,i,l){var c=u(e[n],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==ae(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,l)}))}l(c.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function P(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=O(i,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=E,n(y,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(v.prototype),c(v.prototype,i,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new v(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),c(y,l,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function le(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){le(a,n,o,i,l,"next",e)}function l(e){le(a,n,o,i,l,"throw",e)}i(void 0)}))}}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ae(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ae(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Ee=function(){var e,t=pe((0,T.useState)([]),2),r=t[0],g=t[1],y=pe((0,T.useState)(),2),b=y[0],v=y[1],P=pe((0,T.useState)((function(){return Number((0,ne.fp)(x.dR.ITEMS_PER_PAGE_LOCAL_STORAGE_KEY))})),2),I=P[0],S=P[1],R=pe((0,T.useState)((function(){return(0,ne.fp)(x.dR.TABLE_COLUMNS_LOCAL_STORAGE_KEY)})),2),A=R[0],D=R[1],w=(0,H.Q)(),G=(0,T.useRef)(null),B=(0,z.nl)(),M=(0,O.$)(),ae=((0,h.d)().showModal,(0,E.g)()),le=(0,i.p)().showToast,se=(0,_.U)(),de=(0,f.L)(),_e=pe((0,T.useState)(-1),2),Ee=_e[0],he=_e[1],ge=pe((0,T.useState)({ids:[],indexes:[]}),2),ye=ge[0],be=ge[1],ve=w.edit_state,Pe=w.delete,Oe=(0,F.a)(),Ie=Oe.pageInfo,Se=Oe.onPageChange,me=Oe.onFilterItems,Te=Oe.offset,Le=(0,ee.R4)(),Re=(0,ee.r7)(),Ae=Number(Ie.filter.limit)||x.Hy,De=(0,ee.u6)({offset:Te,limit:Ae,filter:Ie.filter,page_type:"page"}),Ce=(0,j.O)({defaultValues:{search:Ie.filter.search||"",sortBy:Ie.filter.sortBy||"title",limit:Number(I)||x.Hy,status:Number(Ie.filter.status)||null,type:Ie.filter.type||null,access:Number(Ie.filter.access)||null,category:Number(Ie.filter.category)||null,language:Ie.filter.language||""}}),we=(0,j.O)({defaultValues:{columns:["author","categories","access","id","hits","language"]}}),Ge=(0,k.N)(Ce.watch("search","")),Be=Ce.watch("limit"),Me=Ce.watch("sortBy"),Ue=Ce.watch("status"),xe=Ce.watch("type"),Ne=Ce.watch("access"),Ze=Ce.watch("category"),ke=Ce.watch("language"),je=!!(Ge||(0,re.BB)(Ue)||Ne||Ze||ke),Fe=(0,Y.D)(Ge);(0,T.useEffect)((function(){if((0,m.$K)(A))try{var e=JSON.parse(A);we.setValue("columns",e)}catch(e){console.error(e)}}),[]),(0,T.useEffect)((function(){me(ue(ue(ue(ue(ue(ue(ue(ue({},Ge.length>0&&{search:Ge}),(0,m.$K)(Ue)&&{status:Ue.toString()}),(0,m.$K)(xe)&&{type:xe}),Ne&&{status:Ne.toString()}),(0,m.$K)(Ze)&&{category:Ze.toString()}),ke&&{language:ke}),Be&&{limit:String(Be)}),Me&&{sortBy:Me})),Ge!==Fe&&Se(1)}),[me,Ge,Be,Me,xe,Ue,Ne,Ze,ke,Fe,Se]);var We=!!Ge||(0,m.$K)(Ue)||(0,m.$K)(Ne)||(0,m.$K)(Ze)||!!ke||(0,m.$K)(xe),Ye=(0,N.Dy)((0,N.VT)(N.we),(0,N.VT)(N.Lg,{coordinateGetter:Z.is})),He=[{label:M("COM_SPPAGEBUILDER_EDITOR_FILTER_PUBLISH"),value:"published",disabled:!ve},{label:M("COM_SPPAGEBUILDER_EDITOR_FILTER_UNPUBLISH"),value:"unpublished",disabled:!ve},{label:M("COM_SPPAGEBUILDER_EDITOR_ACTION_CHECKOUT"),value:"check-out",disabled:!ve},{label:M("COM_SPPAGEBUILDER_EDITOR_FILTER_LANGUAGE"),value:"language",disabled:!ve},{label:M("COM_SPPAGEBUILDER_EDITOR_FILTER_ACCESS"),value:"access",disabled:!ve},{label:M("COM_SPPAGEBUILDER_EDITOR_FILTER_CATEGORY"),value:"category",disabled:!ve},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_EXPORT"),value:"export",disabled:!ve},{label:M(-2===Ue?"COM_SPPAGEBUILDER_EDITOR_FILTER_DELETE":"COM_SPPAGEBUILDER_EDITOR_FILTER_TRASH"),value:-2===Ue?"delete":"trash",disabled:!Pe||!ve,variant:"critical"}],Ke={language:M("COM_SPPAGEBUILDER_EDITOR_FILTER_LANGUAGE_CHANGE"),access:M("COM_SPPAGEBUILDER_EDITOR_FILTER_ACCESS_CHANGE"),category:M("COM_SPPAGEBUILDER_EDITOR_FILTER_CATEGORY_CHANGE")},qe={language:M("COM_SPPAGEBUILDER_EDITOR_FILTER_LANGUAGE"),access:M("COM_SPPAGEBUILDER_EDITOR_FILTER_ACCESS"),category:M("COM_SPPAGEBUILDER_EDITOR_FILTER_CATEGORY")},Xe=[{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_TITLE_ASC"),value:"title"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_TITLE_DESC"),value:"-title"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_ORDERING_ASC"),value:"ordering"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_ORDERING_DESC"),value:"-ordering"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_DATE_ASC"),value:"created_on"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_DATE_DESC"),value:"-created_on"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_STATUS_ASC"),value:"published"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_STATUS_DESC"),value:"-published"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_HITS_ASC"),value:"hits"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_HITS_DESC"),value:"-hits"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_ID_ASC"),value:"id"},{label:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_SORT_BY_ID_DESC"),value:"-id"}],$e=[{label:M("COM_SPPAGEBUILDER_EDITOR_COLUMN_LIST_AUTHOR"),value:"author"},{label:M("COM_SPPAGEBUILDER_EDITOR_COLUMN_LIST_CATEGORIES"),value:"categories"},{label:M("COM_SPPAGEBUILDER_EDITOR_COLUMN_LIST_ACCESS"),value:"access"},{label:M("COM_SPPAGEBUILDER_EDITOR_COLUMN_LIST_ID"),value:"id"},{label:M("COM_SPPAGEBUILDER_EDITOR_COLUMN_LIST_HITS"),value:"hits"},{label:M("COM_SPPAGEBUILDER_EDITOR_COLUMN_LIST_LANGUAGE"),value:"language"}],Ve=[5,10,15,20,25,30,50,100,200,500].map((function(e){return{label:e.toString(),value:e}}));(0,T.useEffect)((function(){De.data&&g(De.data.results)}),[De.data]);var Je=we.watch("columns",[]);(0,T.useEffect)((function(){(0,ne.pj)(x.dR.TABLE_COLUMNS_LOCAL_STORAGE_KEY,JSON.stringify(Je)),(0,ne.pj)(x.dR.ITEMS_PER_PAGE_LOCAL_STORAGE_KEY,JSON.stringify(Be)),S(Number(JSON.stringify(Be))),D(JSON.stringify(Je))}),[Je,Be]);var Qe=pe((0,T.useState)(!1),2),ze=Qe[0],et=Qe[1],tt=pe((0,T.useState)(!1),2),rt=tt[0],nt=tt[1],ot=(0,W.l)({isOpen:ze,arrow:"top"}),at=ot.triggerRef,it=ot.popoverRef,lt=ot.position,ct=(0,W.l)({isOpen:rt,arrow:"top"}),st=ct.triggerRef,ut=ct.popoverRef,dt=ct.position;return(0,L.BX)(d.Z,{children:[(0,L.tZ)(p.Z,{title:M("COM_SPPAGEBUILDER_EDITOR_PAGE_TITLE_PAGES"),subtitle:M("COM_SPPAGEBUILDER_EDITOR_PAGE_SUBTITLE_PAGES"),action:w.create&&(0,L.BX)(L.HY,{children:[(0,L.tZ)(n.Z,{variant:"secondary",buttonCss:fe.importButtonCss,onClick:function(){var e;return null===(e=G.current)||void 0===e?void 0:e.click()},children:M("COM_SPPAGEBUILDER_EDITOR_PAGE_BULK_IMPORT")}),(0,L.tZ)(n.Z,{icon:(0,L.tZ)(a.Z,{name:"plus"}),onClick:function(){et(!0)},ref:at,children:M("COM_SPPAGEBUILDER_EDITOR_ADD_NEW_PAGE_BUTTON")})]})}),(0,L.tZ)("input",{ref:G,type:"file",hidden:!0,onChange:function(){var e=ce(ie().mark((function e(t){var r,n;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(r=t.target.files)||void 0===r?void 0:r[0]){e.next=3;break}return e.abrupt("return");case 3:B.mutate(n),t.target.value="";case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(0,L.tZ)(u.Z,{children:(0,L.BX)(X.Z,{query:De,disableLoader:!0,children:[(0,L.BX)("div",{css:fe.topPanel,children:[(0,L.BX)("div",{css:fe.topPanelLeft,children:[(0,L.tZ)(o.Z,{options:He,placeholder:M("COM_SPPAGEBUILDER_EDITOR_BULK_ACTION_DROPDOWN_PLACEHOLDER"),wrapperStyle:fe.topPanelLeftSelect,isClearable:!1,disabled:0===ye.ids.length||!ve,value:He.find((function(e){return e.value===b})),onChange:function(e){v(e.value)}}),(0,L.tZ)(n.Z,{onClick:ce(ie().mark((function e(){var t,r,n,o,a;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.ids.length&&b){e.next=2;break}return e.abrupt("return");case 2:if("export"!==b){e.next=12;break}return e.next=5,de({title:M("COM_SPPAGEBUILDER_EDITOR_PAGE_EXPORT_TITLE"),confirmationMessage:M("COM_SPPAGEBUILDER_EDITOR_EXPORT_PAGES_MESSAGE")});case 5:t=e.sent,r=t.action,n=t.seoChecked,o=t.mediaChecked,"CONFIRM"===r&&(0,z.PS)(ye.ids.join(","),n,o),e.next=30;break;case 12:if("language"!==b&&"access"!==b&&"category"!==b){e.next=20;break}return e.next=15,se({title:Ke[b],label:qe[b],bulkAction:b,mutationFn:ee.hh,payload:{ids:ye.ids.join(","),type:b},invalidateKeys:[["PageList"]]});case 15:"CONFIRM"===e.sent.action&&le({type:"success",message:M("COM_SPPAGEBUILDER_EDITOR_BULK_ACTION_PERFORMED_SUCCESSFULLY")}),e.next=30;break;case 20:if("delete"===b){e.next=24;break}Le.mutate({ids:ye.ids.join(","),type:b}),e.next=30;break;case 24:return a=ye.ids.length,e.next=27,ae({title:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_DELETE_MODAL_TITLE"),confirmationMessage:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_DELETE_MODAL_MESSAGE_MULTIPLE_PAGES",{totalPages:a.toString().padStart(2,"0")}),confirmButtonText:M("COM_SPPAGEBUILDER_EDITOR_PAGE_LIST_DELETE_MODAL_DELETE_BUTTON_TEXT",{totalPages:a.toString().padStart(2,"0")}),mutationFn:ee.hh,payload:{ids:ye.ids.join(","),type:b},invalidateKeys:[["PageList"]]});case 27:"CONFIRM"===e.sent.action&&le({type:"success",message:M("COM_SPPAGEBUILDER_EDITOR_BULK_ACTION_PERFORMED_SUCCESSFULLY")});case 30:v(null),be({ids:[],indexes:[]}),he(-1);case 33:case"end":return e.stop()}}),e)}))),disabled:!b,children:M("COM_SPPAGEBUILDER_EDITOR_APPLY")})]}),(0,L.tZ)("div",{css:fe.topPanelRight,children:(0,L.tZ)($.Z,{clearButtonStatus:We,onClearFilter:function(){return Ce.reset({search:"",status:null,access:null,category:null,language:"",type:null})},values:{status:Ue,type:xe,access:Ne,category:Ze,language:ke},onChange:function(e){Ce.reset(ue(ue({},Ce.getValues()),{},{status:e.status,type:e.type,access:e.access,category:Number(e.category),language:e.language||""}))}})})]}),(0,L.BX)(K.Z,{cardCss:fe.cardStyle,children:[(0,L.BX)("div",{css:fe.tableHeaderWrapper,children:[(0,L.tZ)("div",{css:fe.searchFieldWrapper,children:(0,L.tZ)(oe.Qr,{control:Ce.control,name:"search",render:function(e){return(0,L.tZ)(s.Z,ue(ue({},e),{},{variant:"search",placeholder:M("COM_SPPAGEBUILDER_EDITOR_SEARCH_INPUT_PLACEHOLDER"),isClearable:!0}))}})}),(0,L.BX)("div",{css:fe.sortByFieldWrapper,children:[(0,L.tZ)(oe.Qr,{control:Ce.control,name:"limit",render:function(e){return(0,L.tZ)(c.Z,ue(ue({},e),{},{options:Ve,isClearable:!1,removeOptionsMinWidth:!0}))}}),(0,L.tZ)(oe.Qr,{control:we.control,name:"columns",render:function(e){return(0,L.tZ)(l.Z,ue(ue({},e),{},{options:$e,placeholder:M("COM_SPPAGEBUILDER_EDITOR_PAGE_TABLE_COLUMNS"),disabled:De.isSuccess&&!De.data.results.length,showChips:!1,hideSelectNumbers:!0,isClearable:!1}))}}),(0,L.tZ)(oe.Qr,{control:Ce.control,name:"sortBy",render:function(e){return(0,L.tZ)(c.Z,ue(ue({},e),{},{options:Xe,placeholder:M("COM_SPPAGEBUILDER_EDITOR_PAGE_SORT_TABLE_BY_PLACEHOLDER"),showArrowUpDown:!0,disabled:De.isSuccess&&!De.data.results.length}))}})]})]}),De.isSuccess&&!De.data.results.length?je?(0,L.tZ)(q.Z,{orientation:"vertical",emptyStateImage:Q,imageAltText:M("COM_SPPAGEBUILDER_EDITOR_ADDONS_NO_MATCH_FOUND"),title:M("COM_SPPAGEBUILDER_EDITOR_ADDONS_NO_MATCH_FOUND"),removeBorderRadius:!0,wrapperCss:fe.wrapperCss}):(0,L.tZ)(q.Z,{orientation:"vertical",emptyStateImage:J,imageAltText:M("COM_SPPAGEBUILDER_EDITOR_EMPTY_PAGE_LIST_IMAGE_ALT"),title:M("COM_SPPAGEBUILDER_EDITOR_EMPTY_PAGE_LIST_TITLE"),content:M("COM_SPPAGEBUILDER_EDITOR_EMPTY_PAGE_LIST_CONTENT"),removeBorderRadius:!0,action:(0,L.tZ)(n.Z,{icon:(0,L.tZ)(a.Z,{name:"plus"}),onClick:function(){nt(!0)},ref:st,children:M("COM_SPPAGEBUILDER_EDITOR_ADD_NEW_PAGE_BUTTON")})}):(0,L.tZ)(N.LB,{sensors:Ye,collisionDetection:N.pE,onDragEnd:function(e){var t=e.active,n=e.over;null!=n&&n.id&&t.id!==n.id&&g((function(e){var o=e.findIndex((function(e){return e.id===t.id})),a=e.findIndex((function(e){return e.id===n.id})),i=(0,Z.Rp)(r,o,a),l=(0,m.x9)(i),c=Array.from({length:l.length},(function(e,t){return t+1}));return Re.mutate({ids:l,orders:c}),Ce.reset(ue(ue({},Ce.getValues()),{},{sortBy:"ordering"})),i}))},modifiers:[te.l],children:(0,L.tZ)(Z.Fo,{items:r,strategy:Z.qw,children:(0,L.tZ)(U.Z,{data:r,isLoading:De.isLoading,selectedItems:ye,setSelectedItems:be,lastSelectedIndex:Ee,setLastSelectedIndex:he,columns:Je})})})]}),(0,L.tZ)("div",{css:fe.paginatorWrapper,children:(0,L.tZ)(V.Z,{currentPage:Ie.page,onPageChange:Se,totalItems:(null===(e=De.data)||void 0===e?void 0:e.totalItems)||0,itemsPerPage:Number(Ie.filter.limit)||x.Hy})})]})}),(0,L.tZ)(W.h,{isOpen:ze,onClickOutside:function(){return et(!1)},hasBackdropBackground:!0,children:(0,L.tZ)(C,{ref:it,position:lt,onClose:function(){return et(!1)}})}),(0,L.tZ)(W.h,{isOpen:rt,onClickOutside:function(){return nt(!1)},hasBackdropBackground:!0,children:(0,L.tZ)(C,{ref:ut,position:dt,onClose:function(){return nt(!1)}})})]})};var fe={topPanel:(0,P.iv)("display:flex;justify-content:space-between;align-items:center;gap:",b.W0[8],";margin:",b.W0[16]," 0 ",b.W0[32]," 0;;label:topPanel;"),topPanelLeft:(0,P.iv)("display:flex;justify-content:center;align-items:center;gap:",b.W0[16],";;label:topPanelLeft;"),topPanelLeftSelect:{name:"1ex2zjt-topPanelLeftSelect",styles:"max-width:128px;label:topPanelLeftSelect;"},topPanelRight:{name:"3pet9h-topPanelRight",styles:"max-width:840px;width:100%;height:32px;label:topPanelRight;"},pageName:(0,P.iv)(v.c.heading6(),";color:",b.qo.text.default,";;label:pageName;"),cardStyle:(0,P.iv)("border-radius:",b.E0[5],";box-shadow:",b.AF.base,";overflow:hidden;;label:cardStyle;"),tableHeaderWrapper:(0,P.iv)("width:100%;display:flex;justify-content:space-between;align-items:center;gap:",b.W0[8],";padding:",b.W0[24],";;label:tableHeaderWrapper;"),searchFieldWrapper:{name:"tjtfnx-searchFieldWrapper",styles:"width:min(280px, 100%);label:searchFieldWrapper;"},sortByFieldWrapper:(0,P.iv)("width:min(500px, 100%);display:flex;gap:",b.W0[16],";>div:first-of-type{max-width:80px;};label:sortByFieldWrapper;"),tableRowStyle:{name:"1l9y7ek-tableRowStyle",styles:":last-of-type{border-bottom:none;};label:tableRowStyle;"},paginatorWrapper:(0,P.iv)("margin-top:",b.W0[32],";;label:paginatorWrapper;"),wrapperCss:{name:"1kd73z9-wrapperCss",styles:">img{max-width:180px;max-height:180px;};label:wrapperCss;"},importButtonCss:(0,P.iv)("margin-right:",b.W0[10],";;label:importButtonCss;")}}}]);